"use strict";(self.webpackChunksearch_party_lab=self.webpackChunksearch_party_lab||[]).push([[6370],{316:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>a,default:()=>l,frontMatter:()=>s,metadata:()=>c,toc:()=>h});var t=r(4848),o=r(8453);const s={},a="\ud83d\udcd8 Scoring",c={id:"search-operators/scoring",title:"\ud83d\udcd8 Scoring",description:"You might have noticed that most of the operators have a score property, which we haven't really talked about so far.",source:"@site/docs/5-search-operators/06-scoring.mdx",sourceDirName:"5-search-operators",slug:"/search-operators/scoring",permalink:"/search-lab/docs/search-operators/scoring",draft:!1,unlisted:!1,editUrl:"https://github.com/mongodb-developer/search-lab/blob/main/docs/5-search-operators/06-scoring.mdx",tags:[],version:"current",sidebarPosition:6,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\ud83d\udcd8 The range Operator",permalink:"/search-lab/docs/search-operators/range"},next:{title:"\ud83d\udcd8 Score Modifiers",permalink:"/search-lab/docs/search-operators/score-modifier"}},i={},h=[];function d(e){const n={code:"code",em:"em",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"-scoring",children:"\ud83d\udcd8 Scoring"})}),"\n",(0,t.jsxs)(n.p,{children:["You might have noticed that most of the operators have a ",(0,t.jsx)(n.code,{children:"score"})," property, which we haven't really talked about so far."]}),"\n",(0,t.jsx)(n.p,{children:"Before we jump into scoring, it is important to understand what the document score is. Every document returned by an Atlas Search query is assigned a score based on relevance, and the documents included in a result set are returned in order from highest score to lowest."}),"\n",(0,t.jsx)(n.p,{children:"Some factors that can influence the score include:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"The position of the search term in the document."}),"\n",(0,t.jsx)(n.li,{children:"The frequency of occurrence of the search term in the document."}),"\n",(0,t.jsx)(n.li,{children:"The type of operator the query uses."}),"\n",(0,t.jsx)(n.li,{children:"The type of analyzer the query uses."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["To see the scores, you will need to project a new metadata field, using ",(0,t.jsx)(n.code,{children:"$meta"}),". To see the document scores in a simple phrase search for ",(0,t.jsx)(n.em,{children:"Alice in Wonderland"}),", try the following aggregation pipeline."]}),"\n",(0,t.jsx)(n.p,{children:"You can run this in the aggregation builders from the Atlas UI or in Compass."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'[\n  {\n    $search: {\n      index: "fulltextsearch",\n      phrase: {\n        query: "Alice in Wonderland",\n        path: "title",\n      },\n    },\n  },\n  {\n    $project: {\n      title: 1,\n      authors: 1,\n      pages: 1,\n      year: 1,\n      score: {\n        $meta: "searchScore",\n      },\n    },\n  },\n]\n'})}),"\n",(0,t.jsx)(n.p,{children:"Your first result should look like this:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n  "_id": "0831702877",\n  "title": "Alice in Wonderland",\n  "authors": [\n    {\n      "_id": "64cc2db4830ba29148da7bbc",\n      "name": "Walt Disney Productions"\n    },\n    {\n      "_id": "64cc2db4830ba29148da8db5",\n      "name": "Mouse Works"\n    }\n  ],\n  "pages": 95,\n  "year": 1997,\n  "score": 10.441896438598633\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"It got scored much higher than the next one because it's an exact match."})]})}function l(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>c});var t=r(6540);const o={},s=t.createContext(o);function a(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);